version: '3'

env:

  PROJECT_DIR: '/home/drgomesp/src/scaffold-eth/packages/hardhat'
  CONTRACT_NAME: 'YourContract'

tasks:

  check:
    cmds:
      - solc --version
      - abigen --version
      - echo 'Environment ready!'

  build:
    dir: ./cmd/ethos
    cmds:
      - echo 'Build started'
      - go build
      - go install
      - echo 'Build finished'

  build-contracts:
    cmds:
      - echo 'Building contracts at '$PROJECT_DIR
      - solc --abi $PROJECT_DIR/contracts/$CONTRACT_NAME.sol -o ./build --overwrite
      - solc --bin $PROJECT_DIR/contracts/$CONTRACT_NAME.sol -o ./build --overwrite
      - abigen --bin=./build/$CONTRACT_NAME.bin --abi=./build/$CONTRACT_NAME.abi --pkg=main --out=./cmd/ethos/$CONTRACT_NAME.go
    silent: true
